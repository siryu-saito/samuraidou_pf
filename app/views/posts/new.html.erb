<div class="newPost">
  <div class="newPost_main_image">
    <div class="newPost_post wrapper">
      <h1 class="newPost_post_title">新規投稿</h1>
      <%= form_with model:@post, url: posts_path, local:true do |f|%>
        <div class="newPost_post_field">
          <div class="field">
            <%= f.label :title, "タイトル" %><br>
            <%= f.text_field :title, class: "text_field" %>
          </div>
          <div class="field">
            <%= f.label :address, "場所" %><br>
            <%= f.text_field :address, class: "text_field" %>
          </div>
          <div class="field">
            <%= f.label :text, "感想" %><br>
            <%= f.text_area :text, class: "text_area" %>
          </div>
          <div id="star" class="field">
            <%= f.label :rate, "評価" %><br>
          </div>
          <div class="field">
            <%= f.label :post_images_images, "画像" %><br>
            <%= f.attachment_field :post_images_images, multiple: true %>
          </div>
          <%= f.submit '投稿', class: "button" %>
        </div>
      <% end %>
    </div>
  </div>
  <div class="newPost_index wrapper">
    <h1 class="newPost_index_title">新規投稿一覧</h1>
    <div class="newPost_index_box">
      <% @posts.each do |post| %>
        <%= link_to post_path(post) do %>
          <div class="newPost_index_box_item">
            <% if post.post_images.present? %>
              <% post.post_images.first(1).each do |image| %>
                <%= attachment_image_tag image, :image, :fill, 200, 200 %>
              <% end %>
            <% else %>
              <%= image_tag 'no_image.jpg', size: '200×200' %>
            <% end %>
            <p class="link"><%= post.title %></p>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
<%= paginate @posts %>

<script>
$('#star').raty({
  starOff:  '<%= asset_path('star-off.png') %>',
  starOn : '<%= asset_path('star-on.png') %>',
  scoreName: 'post[rate]',
});
</script>